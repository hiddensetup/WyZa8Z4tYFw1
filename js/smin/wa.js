function showQrModal(o,e,t){$("body").append(`<div class="qr-modal-overlay" id="${e}"></div>
       <div id="${o}" class="qr-modal">
           <button class="qr-close-btn" onclick="closeQrModal('#${o}', '#${e}')">&times;</button>
           <img class="qr-image" src="${t}" id="${o}_img" onerror="this.style.display='none';$('#${o}_loading').show();" />
           <div class="qr-loading" id="${o}_loading"><div>Loading...</div></div>
           <p class="qr-message">Scan the QR code and wait for your phone to confirm in WhatsApp. When done, close this and enjoy!</p>
       </div>`),$("#"+e).on("click",function(){closeQrModal("#"+o,"#"+e)}),setTimeout(function(){closeQrModal("#"+o,"#"+e)},8e3)}function closeQrModal(o,e){$(o).remove(),$(e).remove()}function handleButtonClick(o,e,n,i,r){return o.preventDefault(),"start"===e?($(`#${i}_loading`).show(),fetch(STMBX_URL+n).then(o=>{if(o.ok)return o.text();throw new Error("Network response was not ok")}).then(o=>{try{var e,t=JSON.parse(o);t.error?SBChat.showResponse('<i class="bi bi-emoji-dizzy-fill"></i> WhatsApp is unresponsive',"warning"):t.image&&(e="data:image/png;base64,"+t.image,showQrModal(i,r,e),$(`#${i}_loading`).hide())}catch(o){if(!(o instanceof SyntaxError))throw o;fetch(STMBX_URL+n).then(o=>{if(o.ok)return o.blob();throw new Error("Network response was not ok")}).then(o=>{o=URL.createObjectURL(o);showQrModal(i,r,o),$(`#${i}_loading`).hide()}).catch(o=>{SBChat.showResponse('<i class="bi bi-emoji-dizzy-fill"></i> WhatsApp is unresponsive',"error")})}}).catch(o=>{SBChat.showResponse('<i class="bi bi-emoji-dizzy-fill"></i> WhatsApp is unresponsive',"error")}).finally(()=>{$(`#${i}_loading`).hide()})):"restart"===e&&$.ajax({url:n,method:"GET",dataType:"json",success:function(o){SBChat.showResponse('<i style="var(--color-red)" class="bi bi-telephone-x"></i> Disconnecting from WhatsApp...'),closeQrModal("#"+i,"#"+r)},error:function(o){SBChat.showResponse('<i class="bi bi-emoji-dizzy-fill"></i> WhatsApp is unresponsive',"error")}}),!1}$(document).on("click","#whatsmeow-go-start .sb-btn",function(o){handleButtonClick(o,"start","/include/get_ww.php?qrurl=","qr_modal1","qr_modal_overlay1")}),$(document).on("click","#whatsmeow-go-restart .sb-btn",function(o){handleButtonClick(o,"restart","/include/reset_ww.php","qr_modal1","qr_modal_overlay1")}),$(document).on("click","#waweb-go-start .sb-btn",function(o){handleButtonClick(o,"start","/include/get_wx.php?qrurl=","qr_modal2","qr_modal_overlay2")}),$(document).on("click","#waweb-go-restart .sb-btn",function(o){handleButtonClick(o,"restart","/include/reset_wx.php","qr_modal2","qr_modal_overlay2")});